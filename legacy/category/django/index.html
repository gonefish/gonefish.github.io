<!DOCTYPE html>
<html lang="zh-CN" class="no-js">

<!-- Mirrored from gonefish.info/category/django/ by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 21 Sep 2016 23:57:41 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="profile" href="http://gmpg.org/xfn/11">
		<script>(function(html){html.className = html.className.replace(/\bno-js\b/,'js')})(document.documentElement);</script>
<title>Django &#8211; 骨头鱼的墓</title>
<link rel='dns-prefetch' href='http://s.w.org/' />
<link rel="alternate" type="application/rss+xml" title="骨头鱼的墓 &raquo; Feed" href="../../feed/index.html" />
<link rel="alternate" type="application/rss+xml" title="骨头鱼的墓 &raquo; 评论Feed" href="../../comments/feed/index.html" />
<link rel="alternate" type="application/rss+xml" title="骨头鱼的墓 &raquo; Django分类目录Feed" href="feed/index.html" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/gonefish.info\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.6.1"}};
			!function(a,b,c){function d(a){var c,d,e,f,g,h=b.createElement("canvas"),i=h.getContext&&h.getContext("2d"),j=String.fromCharCode;if(!i||!i.fillText)return!1;switch(i.textBaseline="top",i.font="600 32px Arial",a){case"flag":return i.fillText(j(55356,56806,55356,56826),0,0),!(h.toDataURL().length<3e3)&&(i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,65039,8205,55356,57096),0,0),c=h.toDataURL(),i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,55356,57096),0,0),d=h.toDataURL(),c!==d);case"diversity":return i.fillText(j(55356,57221),0,0),e=i.getImageData(16,16,1,1).data,f=e[0]+","+e[1]+","+e[2]+","+e[3],i.fillText(j(55356,57221,55356,57343),0,0),e=i.getImageData(16,16,1,1).data,g=e[0]+","+e[1]+","+e[2]+","+e[3],f!==g;case"simple":return i.fillText(j(55357,56835),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode8":return i.fillText(j(55356,57135),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode9":return i.fillText(j(55358,56631),0,0),0!==i.getImageData(16,16,1,1).data[0]}return!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i;for(i=Array("simple","flag","unicode8","diversity","unicode9"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='genericons-css'  href='../../wp-content/themes/twentysixteen/genericons/genericons5589.css?ver=3.4.1' type='text/css' media='all' />
<link rel='stylesheet' id='twentysixteen-style-css'  href='../../wp-content/themes/twentysixteen/style1c9b.css?ver=4.6.1' type='text/css' media='all' />
<!--[if lt IE 10]>
<link rel='stylesheet' id='twentysixteen-ie-css'  href='http://gonefish.info/wp-content/themes/twentysixteen/css/ie.css?ver=20160816' type='text/css' media='all' />
<![endif]-->
<!--[if lt IE 9]>
<link rel='stylesheet' id='twentysixteen-ie8-css'  href='http://gonefish.info/wp-content/themes/twentysixteen/css/ie8.css?ver=20160816' type='text/css' media='all' />
<![endif]-->
<!--[if lt IE 8]>
<link rel='stylesheet' id='twentysixteen-ie7-css'  href='http://gonefish.info/wp-content/themes/twentysixteen/css/ie7.css?ver=20160816' type='text/css' media='all' />
<![endif]-->
<!--[if lt IE 9]>
<script type='text/javascript' src='http://gonefish.info/wp-content/themes/twentysixteen/js/html5.js?ver=3.7.3'></script>
<![endif]-->
<script type='text/javascript' src='../../wp-includes/js/jquery/jqueryb8ff.js?ver=1.12.4'></script>
<script type='text/javascript' src='../../wp-includes/js/jquery/jquery-migrate.min330a.js?ver=1.4.1'></script>
<link rel='https://api.w.org/' href='../../wp-json/index.html' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../xmlrpc0db0.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../../wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 4.6.1" />
<style type="text/css" id="syntaxhighlighteranchor"></style>
</head>

<body class="archive category category-django category-9 hfeed">
<div id="page" class="site">
	<div class="site-inner">
		<a class="skip-link screen-reader-text" href="#content">跳至内容</a>

		<header id="masthead" class="site-header" role="banner">
			<div class="site-header-main">
				<div class="site-branding">
					
											<p class="site-title"><a href="../../index.html" rel="home">骨头鱼的墓</a></p>
											<p class="site-description">Changing Anytime</p>
									</div><!-- .site-branding -->

							</div><!-- .site-header-main -->

					</header><!-- .site-header -->

		<div id="content" class="site-content">

	<div id="primary" class="content-area">
		<main id="main" class="site-main" role="main">

		
			<header class="page-header">
				<h1 class="page-title">分类：Django</h1>			</header><!-- .page-header -->

			
<article id="post-1039" class="post-1039 post type-post status-publish format-standard hentry category-django">
	<header class="entry-header">
		
		<h2 class="entry-title"><a href="../../2013/08/django-china-aera/index.html" rel="bookmark">django-china-area</a></h2>	</header><!-- .entry-header -->

	
	
	<div class="entry-content">
		<p>翻出原来用Zend Framework做的一个jQuery Demo，用于选择中国区域信息，最近整理出一个Django 的App的版本，地址已经放到Github上面去了</p>
<p><a href="https://github.com/gonefish/django-china-area">https://github.com/gonefish/django-china-area</a></p>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><span class="author vcard"><span class="screen-reader-text">作者 </span> <a class="url fn n" href="../../author/admin/index.html">admin</a></span></span><span class="posted-on"><span class="screen-reader-text">发布于 </span><a href="../../2013/08/django-china-aera/index.html" rel="bookmark"><time class="entry-date published" datetime="2013-08-02T21:13:25+00:00">2013年8月2日</time><time class="updated" datetime="2013-08-10T20:05:24+00:00">2013年8月10日</time></a></span><span class="cat-links"><span class="screen-reader-text">分类 </span><a href="index.html" rel="category tag">Django</a></span>			</footer><!-- .entry-footer -->
</article><!-- #post-## -->

<article id="post-705" class="post-705 post type-post status-publish format-standard hentry category-django">
	<header class="entry-header">
		
		<h2 class="entry-title"><a href="../../2010/12/%e6%a8%a1%e6%9d%bf%e8%af%ad%e8%a8%80%e6%98%af%e8%b6%8a%e5%82%bb%e8%b6%8a%e5%a5%bd/index.html" rel="bookmark">模板语言是越傻越好</a></h2>	</header><!-- .entry-header -->

	
	
	<div class="entry-content">
		<p>For years I&#8217;ve been absolutely certain that I really prefer stupid template languages any time I&#8217;m generating HTML. The less the template language can do the better. Since I spend most of my time coding in <a href="http://python.org/">Python</a> you might assume this applies just to Python, but I think it also applies to anything where you have the power to readily mix HTML generation and code.</p>
<p>The biggest annoyance I have with smart template languages (<a href="http://www.makotemplates.org/">Mako</a>, <a href="http://genshi.edgewall.org/">Genshi</a>, <a href="http://jinja.pocoo.org/">Jinja2</a>, <a href="http://php.org/">PHP</a>, <a href="http://www.perl.org/">Perl</a>, <a href="http://en.wikipedia.org/wiki/ColdFusion">ColdFusion</a>, etc) is that you have the capability to mix core business logic with your end views, hence violating the rules of Model-View-Controller architecture. While the web can be hard to match to MVC, in general you aren&#8217;t supposed to do that sort of thing. I&#8217;ve made the mistake of putting core logic in the wrong places in the past, but I&#8217;m proud to say I&#8217;ve gotten good at avoiding that particular mistake.</p>
<p><strong>I don&#8217;t work in a vacuum.</strong></p>
<p>I often work on projects crafted by others, some who decided for arcane/brilliant/idiotic reasons to mix the kernel of their applications in template function/macros. This is only possible in Smart Template Languages! If they were using a Stupid Template Language they would have been forced put their kernel code in a Python file where it applies, not in a template that was supposed to just render HTML or XML or plain text.</p>
<p>What it comes down to is that Smart Template Languages designers assume that developers are smart enough to avoid making this mistake. Stupid Template Languages designers assume that developers generally lack the discipline to avoid creating horrific atrocities that because of unnecessary complexity have a bus factor of 1.</p>
<p><strong>So what is a Smart Template Language?</strong></p>
<p>In my own vernacular, template languages that let you write functions/macros are what I call a <strong>Smart Template Language</strong>. Some of them are brilliantly executed, the example of Jinja2 comes to mind, but invariably I suffer through abuse of its Macro control structure as implemented by others.</p>
<p><strong> </strong></p>
<p><strong>Misery Cubed a.k.a. Genius Template Languages</strong></p>
<p>Next comes <strong>Genius Template Languages</strong>, which take things a step further. These template languages allow you to not only define functions/macros, but also let you embed unrestricted Python (or <a href="http://www.ruby-lang.org/en/">Java</a> or <a href="http://www.ruby-lang.org/en/">Ruby</a> or whatever) in the template. This &#8216;feature&#8217; lets you code your entire application in the templates!  In the Python world what comes to mind is Mako and Genshi, but I&#8217;m sure there are many other tools with this &#8216;capability&#8217;.</p>
<p><strong>I like Stupid Template Languages!</strong></p>
<p>Stupid Template Languages don&#8217;t let you define functions/macros. They don&#8217;t let you embed Python code. They barely let you define variables and often have simplistic control architectures.</p>
<p>For Django efforts, which is about 70% of my work, I like the <a href="http://docs.djangoproject.com/en/dev/topics/templates/">Django Template Language</a> (DTL). Since it is used by a huge community, there are a ton of useful apps which have it as a dependency. Switching away from it would mean cutting myself off from a <a href="http://djangopackages.com/">large ecosphere of tools</a> I can use to not reinvent the wheel.</p>
<p>Back in my <a href="http://bluebream.zope.org/">Zope</a>/<a href="http://plone.org/">Plone</a> days I really, really enjoyed the <a href="http://en.wikipedia.org/wiki/Template_Attribute_Language">Template Attribute Language</a> (TAL) because it was stupid too. If I needed an XML generation template language and could import it easily I might consider using it again, or perhaps <a href="http://chameleon.repoze.org/docs/latest/zpt.html">Chameleon</a>, which is a new, improved version . The downside is that they come paired with another tool paired with it, METAL, which gave it macros. My own experience with METAL is that it was all too easy to do what we developers do with Smart Template Languages.</p>
<p><strong>But DTL and TAL are slow!</strong></p>
<p>So what?</p>
<p>If you want to boost your performance, first try caching. There are a ton of tools you can use, with <a href="http://www.varnish-cache.org/">Varnish</a> being one I keep seeing in action. Read the docs on your favorite web framework&#8217;s caching engine and apply what you learn. And Djangonauts should read up on <a href="http://www.slideshare.net/mmalone/scaling-django-1393282">Mike Malone</a> as much as possible.</p>
<p>If after all that the site still delivers slow content and it appears to be a template language issue, then identify the bottleneck content and consider alternatives for that one portion. My favorite response is a bit of <a href="http://en.wikipedia.org/wiki/AJAX">AJAX</a>. Use your framework to render the content as <a href="http://en.wikipedia.org/wiki/JSON">JSON</a> and have <a href="http://en.wikipedia.org/wiki/JavaScript">JavaScript</a> parse it into legible content, a task which <a href="http://en.wikipedia.org/wiki/JQuery">JQuery</a> makes trivial.</p>
<p>From: <a href="http://pydanny.blogspot.com/2010/12/stupid-template-languages.html">http://pydanny.blogspot.com/2010/12/stupid-template-languages.html</a></p>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><span class="author vcard"><span class="screen-reader-text">作者 </span> <a class="url fn n" href="../../author/admin/index.html">admin</a></span></span><span class="posted-on"><span class="screen-reader-text">发布于 </span><a href="../../2010/12/%e6%a8%a1%e6%9d%bf%e8%af%ad%e8%a8%80%e6%98%af%e8%b6%8a%e5%82%bb%e8%b6%8a%e5%a5%bd/index.html" rel="bookmark"><time class="entry-date published" datetime="2010-12-05T13:26:04+00:00">2010年12月5日</time><time class="updated" datetime="2010-12-05T13:27:50+00:00">2010年12月5日</time></a></span><span class="cat-links"><span class="screen-reader-text">分类 </span><a href="index.html" rel="category tag">Django</a></span>			</footer><!-- .entry-footer -->
</article><!-- #post-## -->

<article id="post-510" class="post-510 post type-post status-publish format-standard hentry category-django">
	<header class="entry-header">
		
		<h2 class="entry-title"><a href="../../2009/12/%e5%9c%a8%e7%ba%bf%e8%b0%b7%e6%ad%8c%e5%9c%b0%e5%9b%be%e7%bc%96%e8%be%91%e5%99%a8/index.html" rel="bookmark">在线谷歌地图编辑器</a></h2>	</header><!-- .entry-header -->

	
	
	<div class="entry-content">
		<p>前几天，抽时间把原来的一个Django项目移植到了Google App Engine上，在<a href="code.google.com/appengine/index.html">Google App Engine</a>上面使用Django还是挺方便的，主要有两个主要项目用于帮助更好的使用<a href="http://www.djangoproject.com/">Django</a>。以下是这两个项目：</p>
<p><a href="http://code.google.com/p/google-app-engine-django">Google App Engine Helper for Django</a></p>
<p>和</p>
<p><a href="http://code.google.com/p/app-engine-patch/">app-engine-patch</a></p>
<p>这两个项目的出发点不一样，但我没有使用过app-engine-patch，所以对个项目的评价是不搞谱的。Google App Engine Helper for Django引入了一个经过修改了Model基类，以使之能在Google App Engine上使用Django的model功能。</p>
<p>总的来说Google App Engine Helper for Django这个项目能帮助你尽快的将Django项目移植到Google App Engine上去。</p>
<p>在线谷歌地图编辑器：<a href="http://gmap2s.appspot.com/">http://gmap2s.appspot.com</a></p>
<p>用于帮助你生成在线地图的代码。</p>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><span class="author vcard"><span class="screen-reader-text">作者 </span> <a class="url fn n" href="../../author/admin/index.html">admin</a></span></span><span class="posted-on"><span class="screen-reader-text">发布于 </span><a href="../../2009/12/%e5%9c%a8%e7%ba%bf%e8%b0%b7%e6%ad%8c%e5%9c%b0%e5%9b%be%e7%bc%96%e8%be%91%e5%99%a8/index.html" rel="bookmark"><time class="entry-date published updated" datetime="2009-12-06T21:10:36+00:00">2009年12月6日</time></a></span><span class="cat-links"><span class="screen-reader-text">分类 </span><a href="index.html" rel="category tag">Django</a></span>			</footer><!-- .entry-footer -->
</article><!-- #post-## -->

<article id="post-34" class="post-34 post type-post status-publish format-standard hentry category-django category-php">
	<header class="entry-header">
		
		<h2 class="entry-title"><a href="../../2009/04/%e7%94%a8php%e5%ae%9e%e7%8e%b0django%e7%9a%84%e6%a8%a1%e6%9d%bf%e7%b3%bb%e7%bb%9f/index.html" rel="bookmark">用PHP实现Django的模板系统</a></h2>	</header><!-- .entry-header -->

	
	
	<div class="entry-content">
		<p>这几天一直没有在做lifefix的开发工作，因为突然想用PHP实现一个Django的模版系统。如果不去试一试这个想法的话，估计我的开发工作也做不得不安宁。</p>
<p>开始分析django模板的源代码，一边用PHP来实现，现在基本上理解了其原理，现正在一步一步的实现。啊，期待一个完整的实现。</p>
<p>更新：现在已经移植了大部分功能，但自定义tag方面还没有完成，然后代码还有优化的余地。下周最好整理一下代码，然后发布出来。</p>
<p>移植工作已经基本上完成了，还有些filter没移植，但是支持PHP内部函数，发布在<a href="http://bitbucket.org/gonefish/shine/">http://bitbucket.org/gonefish/shine/</a>这里。</p>
<p>现在在准备文档。</p>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><span class="author vcard"><span class="screen-reader-text">作者 </span> <a class="url fn n" href="../../author/admin/index.html">admin</a></span></span><span class="posted-on"><span class="screen-reader-text">发布于 </span><a href="../../2009/04/%e7%94%a8php%e5%ae%9e%e7%8e%b0django%e7%9a%84%e6%a8%a1%e6%9d%bf%e7%b3%bb%e7%bb%9f/index.html" rel="bookmark"><time class="entry-date published" datetime="2009-04-22T20:53:28+00:00">2009年4月22日</time><time class="updated" datetime="2009-11-30T11:40:47+00:00">2009年11月30日</time></a></span><span class="cat-links"><span class="screen-reader-text">分类 </span><a href="index.html" rel="category tag">Django</a>、<a href="../php/index.html" rel="category tag">PHP</a></span><span class="comments-link"><a href="../../2009/04/%e7%94%a8php%e5%ae%9e%e7%8e%b0django%e7%9a%84%e6%a8%a1%e6%9d%bf%e7%b3%bb%e7%bb%9f/index.html#comments"><span class="screen-reader-text">用PHP实现Django的模板系统</span>有4条评论</a></span>			</footer><!-- .entry-footer -->
</article><!-- #post-## -->

<article id="post-106" class="post-106 post type-post status-publish format-standard hentry category-django">
	<header class="entry-header">
		
		<h2 class="entry-title"><a href="../../2009/03/signals%e7%9a%84%e5%ad%98%e6%94%be%e4%bd%8d%e7%bd%ae/index.html" rel="bookmark">signals的存放位置</a></h2>	</header><!-- .entry-header -->

	
	
	<div class="entry-content">
		<p>根据官方文档signals一般放在app中的management.py文件中，但我在使用<a href="http://code.djangoproject.com/browser/django/trunk">svn</a>中的版本时候，发现通过view的时候尽然不会调用signals，但在命令行和测试中都可以。</p>
<p>如果你也有这样的问题，那么把management.py中的代码放到app的__init__.py中，这样就没有问题。</p>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><span class="author vcard"><span class="screen-reader-text">作者 </span> <a class="url fn n" href="../../author/admin/index.html">admin</a></span></span><span class="posted-on"><span class="screen-reader-text">发布于 </span><a href="../../2009/03/signals%e7%9a%84%e5%ad%98%e6%94%be%e4%bd%8d%e7%bd%ae/index.html" rel="bookmark"><time class="entry-date published updated" datetime="2009-03-05T19:49:11+00:00">2009年3月5日</time></a></span><span class="cat-links"><span class="screen-reader-text">分类 </span><a href="index.html" rel="category tag">Django</a></span>			</footer><!-- .entry-footer -->
</article><!-- #post-## -->

<article id="post-75" class="post-75 post type-post status-publish format-standard hentry category-django">
	<header class="entry-header">
		
		<h2 class="entry-title"><a href="../../2009/03/%e6%9c%80%e6%96%b0%e7%9a%84%e5%bc%80%e5%8f%91%e7%89%88%e6%9c%ac%e4%b8%ad%e7%9a%84session%e4%bf%ae%e6%94%b9/index.html" rel="bookmark">最新的开发版本中的session修改</a></h2>	</header><!-- .entry-header -->

	
	
	<div class="entry-content">
		<p>原来，想实现一个记住我的功能时，需要修改django的代码，因为session中间件对处理记录sessonid的cookie过期时间是写死的。在最新的开发版中，对session对象添加了几个有用的方法，set_expiry()，这个方法根据接受的参数的不同的有不同的效果。</p>
<p>在一般情况下，站点默认使用cookie关闭浏览即取消，当使用记住我的时候，cookie则在某个时间内取消。</p>
<p>首先，需要把SESSION_EXPIRE_AT_BROWSER_CLOSE = True</p>
<p>然后，写个装饰器：</p>
<p>def remember_me(view_func):<br />&nbsp;&nbsp;&nbsp; def _dec(request, *args, **kwargs):<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if request.POST.get(&#8216;rme&#8217;) == &#8216;1&#8217;:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; request.session.set_expiry(request.session.get_expiry_age())<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return view_func(request, *args, **kwargs)<br />&nbsp;&nbsp;&nbsp; return _dec</p>
<p>其中rme是记住我的表单项，对django.contrib.auth.views.login使用这个装饰器，呵呵这样就在不用修改login代码的情况下添加了记住我的功能。</p>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><span class="author vcard"><span class="screen-reader-text">作者 </span> <a class="url fn n" href="../../author/admin/index.html">admin</a></span></span><span class="posted-on"><span class="screen-reader-text">发布于 </span><a href="../../2009/03/%e6%9c%80%e6%96%b0%e7%9a%84%e5%bc%80%e5%8f%91%e7%89%88%e6%9c%ac%e4%b8%ad%e7%9a%84session%e4%bf%ae%e6%94%b9/index.html" rel="bookmark"><time class="entry-date published updated" datetime="2009-03-05T19:48:35+00:00">2009年3月5日</time></a></span><span class="cat-links"><span class="screen-reader-text">分类 </span><a href="index.html" rel="category tag">Django</a></span>			</footer><!-- .entry-footer -->
</article><!-- #post-## -->

<article id="post-76" class="post-76 post type-post status-publish format-standard hentry category-django">
	<header class="entry-header">
		
		<h2 class="entry-title"><a href="../../2009/03/%e5%9c%a8django%e4%b8%ad%e7%9b%b4%e6%8e%a5%e5%b0%86%e7%94%a8%e6%88%b7login/index.html" rel="bookmark">在Django中直接将用户login</a></h2>	</header><!-- .entry-header -->

	
	
	<div class="entry-content">
		<p>在设计站点的时候，也许会有这种情况：当用户注册后，直接帮当前用户登陆，这时可以使用from django.contrib.auth import login的方法来完成用户的状态的改变，但这里有点问题，就是在设置session的时候，会设置一个BACKEND_SESSION_KEY这个东西，如果你使用默认的login view的时候使用from django.contrib.auth import authenticate来对User对象设置一个值。如果不使用authenticate的话，那只有手工自己设置了：</p>
<p>new_user.backend = &#8220;%s.%s&#8221; % (&#8216;django.contrib.auth.backends&#8217;, &#8216;ModelBackend&#8217;)</p>
<p>这样就OK了</p>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><span class="author vcard"><span class="screen-reader-text">作者 </span> <a class="url fn n" href="../../author/admin/index.html">admin</a></span></span><span class="posted-on"><span class="screen-reader-text">发布于 </span><a href="../../2009/03/%e5%9c%a8django%e4%b8%ad%e7%9b%b4%e6%8e%a5%e5%b0%86%e7%94%a8%e6%88%b7login/index.html" rel="bookmark"><time class="entry-date published updated" datetime="2009-03-05T19:46:45+00:00">2009年3月5日</time></a></span><span class="cat-links"><span class="screen-reader-text">分类 </span><a href="index.html" rel="category tag">Django</a></span>			</footer><!-- .entry-footer -->
</article><!-- #post-## -->

<article id="post-110" class="post-110 post type-post status-publish format-standard hentry category-django">
	<header class="entry-header">
		
		<h2 class="entry-title"><a href="../../2009/03/django%e4%b8%ad%e4%b8%8emodel%e6%9c%89%e5%85%b3%e7%9a%84%e4%b8%89%e4%b8%aa%e7%89%b9%e6%80%a7/index.html" rel="bookmark">Django中与Model有关的三个特性</a></h2>	</header><!-- .entry-header -->

	
	
	<div class="entry-content">
		<p>使用Django也差不多有一段时间了，而且也在项目中使用了，刚开始时代码写的很烂，现在看起来非常不爽。我想说一下关于model部分的问题，希望能给初学者一些建议吧。</p>
<p>这里有三个关键部分：<a href="http://www.djangoproject.com/documentation/model-api/#managers" target="_blank">Manager</a>、<a href="http://www.djangoproject.com/documentation/model-api/#model-methods" target="_blank">model方法</a>、<a href="http://code.djangoproject.com/wiki/Signals" target="_blank">Signals</a>。Django是一种非常快速的开发框架，有时候文档还没看完，就能写好多东西，但如果看了文档，那么可以以更少的代码完成相同的功能。</p>
<p>根据Manager的文档说明，Manager用于操作表级别的数据，可以用来对表中的多个项进行操作，在Manager中可以做任何事情，所以再看了Signals后，感觉功能有重叠，等下我会说明为什么重叠。当默认Manager提示的功能不能满足你的需要的时候，那么你就扩展它吧，而且model还可以有多个Manager。</p>
<p>Model方法是行级别的方法，用于对行进行操作，比如：当ModelA是ModelB的外键时，那么可以通过ModelA的Model方法来创建ModelB。Model中的方法最封装成不需要传参数的方法，这样就可以直接在模版中调用了，这样大大减少了代码量。当然Manager也可以这样做，通过for标记遍历Querysets，然后直接调用Model中的方法。</p>
<p>Signals这个东西是非常有用的一个机制，但这个东西还没有正式的文档。所以知名度不是很高，但还是有一个Wiki页面说明了这个东西使用。其实Signals在Django中有大量的应用，比如：在初次syncdb的使用，会让你创建超级管理员，在这里就有一个Signal，post_syncdb，当系统执行syncdb的时候，会调用已监听的方法，通过这个方法实现创建超级管理员向导。系统自带许多Signal，其中有个post_save，这个Signal用于监听Model对象保存后，执行的操作，比如：在现在中都会添加一个UserProfile来扩展User Model，但自带的添加用户方法，并不会添加UserProfile，所以可以使用post_save来监听User Model，当创建User之后，再创建UserProfile，这样不必修改Django源代码就可以使用。当然你也可以使用Manager来完成这个操作，这就是我说的重复部分，怎么用那就看自己的了。</p>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><span class="author vcard"><span class="screen-reader-text">作者 </span> <a class="url fn n" href="../../author/admin/index.html">admin</a></span></span><span class="posted-on"><span class="screen-reader-text">发布于 </span><a href="../../2009/03/django%e4%b8%ad%e4%b8%8emodel%e6%9c%89%e5%85%b3%e7%9a%84%e4%b8%89%e4%b8%aa%e7%89%b9%e6%80%a7/index.html" rel="bookmark"><time class="entry-date published updated" datetime="2009-03-05T19:46:21+00:00">2009年3月5日</time></a></span><span class="cat-links"><span class="screen-reader-text">分类 </span><a href="index.html" rel="category tag">Django</a></span><span class="comments-link"><a href="../../2009/03/django%e4%b8%ad%e4%b8%8emodel%e6%9c%89%e5%85%b3%e7%9a%84%e4%b8%89%e4%b8%aa%e7%89%b9%e6%80%a7/index.html#comments"><span class="screen-reader-text">Django中与Model有关的三个特性</span>有1条评论</a></span>			</footer><!-- .entry-footer -->
</article><!-- #post-## -->

<article id="post-92" class="post-92 post type-post status-publish format-standard hentry category-django">
	<header class="entry-header">
		
		<h2 class="entry-title"><a href="../../2009/03/%e4%bd%bf%e7%94%a8django%e7%ac%ac%e4%b8%89%e6%96%b9%e7%9a%84%e5%ba%93%e5%b0%8f%e6%8f%90%e7%a4%ba/index.html" rel="bookmark">使用django第三方的库小提示</a></h2>	</header><!-- .entry-header -->

	
	
	<div class="entry-content">
		<p>在使用Django的开发过程中，可能会经常会用其它非官方的组件。如果你使用使用它们，一般情况下必须把它们放在项目的根目录下，或者是python的其它环境变量下，如果想把它们整合进项目，但又不想放在项目的根目录，那么可以在settins中加入一个环境变量，比如：</p>
<p>&#8230;</p>
<p>DJANGO_THIDR_COMPONENTS_PATH = &#8216;django-third&#8217;<br />sys.path.append(os.path.join(os.path.dirname(__file__), DJANGO_THIDR_COMPONENTS_PATH))</p>
<p>&#8230;</p>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><span class="author vcard"><span class="screen-reader-text">作者 </span> <a class="url fn n" href="../../author/admin/index.html">admin</a></span></span><span class="posted-on"><span class="screen-reader-text">发布于 </span><a href="../../2009/03/%e4%bd%bf%e7%94%a8django%e7%ac%ac%e4%b8%89%e6%96%b9%e7%9a%84%e5%ba%93%e5%b0%8f%e6%8f%90%e7%a4%ba/index.html" rel="bookmark"><time class="entry-date published updated" datetime="2009-03-05T19:46:20+00:00">2009年3月5日</time></a></span><span class="cat-links"><span class="screen-reader-text">分类 </span><a href="index.html" rel="category tag">Django</a></span>			</footer><!-- .entry-footer -->
</article><!-- #post-## -->

<article id="post-136" class="post-136 post type-post status-publish format-standard hentry category-django">
	<header class="entry-header">
		
		<h2 class="entry-title"><a href="../../2009/03/%e7%94%9f%e6%88%90django%e6%96%87%e6%a1%a3/index.html" rel="bookmark">生成Django文档</a></h2>	</header><!-- .entry-header -->

	
	
	<div class="entry-content">
		<p>由于这几天被逼着写一些文档，顺便找了下跟<a href="http://www.djangoproject.com/">Django</a>有关的文档。后面发现在一直没注意的一个地方，就是在admin里面有个Documentation的链接，点击进入后如果已经安装了<a href="http://docutils.sourceforge.net/">docutils</a>库，则显示一些文档，包括：Tags、Filters、Models、Views、Bookmarklets。其中在Models中，会显示定义的Field和类方法，类和类的方法都可以使用__doc__来写注释。而Field则有一个help_text参数，用于描述Field。Views的部分功能好像有点问题。</p>
<p>一切都非常好。&nbsp;</p>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><span class="author vcard"><span class="screen-reader-text">作者 </span> <a class="url fn n" href="../../author/admin/index.html">admin</a></span></span><span class="posted-on"><span class="screen-reader-text">发布于 </span><a href="../../2009/03/%e7%94%9f%e6%88%90django%e6%96%87%e6%a1%a3/index.html" rel="bookmark"><time class="entry-date published updated" datetime="2009-03-05T19:46:10+00:00">2009年3月5日</time></a></span><span class="cat-links"><span class="screen-reader-text">分类 </span><a href="index.html" rel="category tag">Django</a></span>			</footer><!-- .entry-footer -->
</article><!-- #post-## -->

	<nav class="navigation pagination" role="navigation">
		<h2 class="screen-reader-text">文章导航</h2>
		<div class="nav-links"><span class='page-numbers current'><span class="meta-nav screen-reader-text">页 </span>1</span>
<a class='page-numbers' href='page/2/index.html'><span class="meta-nav screen-reader-text">页 </span>2</a>
<a class="next page-numbers" href="page/2/index.html">下一页</a></div>
	</nav>
		</main><!-- .site-main -->
	</div><!-- .content-area -->


	<aside id="secondary" class="sidebar widget-area" role="complementary">
		<section id="categories-3" class="widget widget_categories"><h2 class="widget-title">分类目录</h2>		<ul>
	<li class="cat-item cat-item-9 current-cat"><a href="index.html" >Django</a>
</li>
	<li class="cat-item cat-item-21"><a href="../ios/index.html" >iOS</a>
</li>
	<li class="cat-item cat-item-6"><a href="../osx/index.html" >OS X</a>
</li>
	<li class="cat-item cat-item-7"><a href="../php/index.html" >PHP</a>
</li>
	<li class="cat-item cat-item-23"><a href="../qqzone/index.html" >QQZone</a>
</li>
	<li class="cat-item cat-item-5"><a href="../web/index.html" >Web</a>
</li>
	<li class="cat-item cat-item-12"><a href="../zend-framework/index.html" >Zend-Framework</a>
</li>
	<li class="cat-item cat-item-17"><a href="../zope/index.html" >Zope</a>
</li>
	<li class="cat-item cat-item-15"><a href="../%e5%8a%a8%e7%94%bb/index.html" >动画</a>
</li>
	<li class="cat-item cat-item-3"><a href="../%e6%80%9d%e5%bf%b5%e7%9a%84%e4%b8%9c%e8%a5%bf/index.html" >思念的东西</a>
</li>
	<li class="cat-item cat-item-20"><a href="../%e6%97%85%e9%80%94%e4%b8%ad/index.html" >旅途中</a>
</li>
	<li class="cat-item cat-item-19"><a href="../%e6%97%b6%e9%97%b4%e5%8f%91%e7%94%9f%e6%9c%ba/index.html" >时间发生机</a>
</li>
	<li class="cat-item cat-item-10"><a href="../%e6%b5%8f%e8%a7%88%e5%99%a8/index.html" >浏览器</a>
</li>
	<li class="cat-item cat-item-18"><a href="../%e7%94%b5%e5%bd%b1/index.html" >电影</a>
</li>
	<li class="cat-item cat-item-16"><a href="../%e7%a7%bb%e5%8a%a8%e5%b9%b3%e5%8f%b0/index.html" >移动平台</a>
</li>
	<li class="cat-item cat-item-14"><a href="../%e9%9d%9ewindows/index.html" >非Windows</a>
</li>
		</ul>
</section><section id="archives-6" class="widget widget_archive"><h2 class="widget-title">文章归档</h2>		<ul>
			<li><a href='../../2016/03/index.html'>2016年三月</a></li>
	<li><a href='../../2016/02/index.html'>2016年二月</a></li>
	<li><a href='../../2016/01/index.html'>2016年一月</a></li>
	<li><a href='../../2015/12/index.html'>2015年十二月</a></li>
	<li><a href='../../2014/11/index.html'>2014年十一月</a></li>
	<li><a href='../../2014/06/index.html'>2014年六月</a></li>
	<li><a href='../../2014/05/index.html'>2014年五月</a></li>
	<li><a href='../../2014/04/index.html'>2014年四月</a></li>
	<li><a href='../../2014/03/index.html'>2014年三月</a></li>
	<li><a href='../../2014/02/index.html'>2014年二月</a></li>
	<li><a href='../../2014/01/index.html'>2014年一月</a></li>
	<li><a href='../../2013/11/index.html'>2013年十一月</a></li>
	<li><a href='../../2013/10/index.html'>2013年十月</a></li>
	<li><a href='../../2013/09/index.html'>2013年九月</a></li>
	<li><a href='../../2013/08/index.html'>2013年八月</a></li>
	<li><a href='../../2013/07/index.html'>2013年七月</a></li>
	<li><a href='../../2013/06/index.html'>2013年六月</a></li>
	<li><a href='../../2013/05/index.html'>2013年五月</a></li>
	<li><a href='../../2013/04/index.html'>2013年四月</a></li>
	<li><a href='../../2013/03/index.html'>2013年三月</a></li>
	<li><a href='../../2013/02/index.html'>2013年二月</a></li>
	<li><a href='../../2013/01/index.html'>2013年一月</a></li>
	<li><a href='../../2012/12/index.html'>2012年十二月</a></li>
	<li><a href='../../2012/11/index.html'>2012年十一月</a></li>
	<li><a href='../../2012/10/index.html'>2012年十月</a></li>
	<li><a href='../../2012/09/index.html'>2012年九月</a></li>
	<li><a href='../../2012/08/index.html'>2012年八月</a></li>
	<li><a href='../../2012/07/index.html'>2012年七月</a></li>
	<li><a href='../../2012/06/index.html'>2012年六月</a></li>
	<li><a href='../../2012/04/index.html'>2012年四月</a></li>
	<li><a href='../../2012/03/index.html'>2012年三月</a></li>
	<li><a href='../../2012/02/index.html'>2012年二月</a></li>
	<li><a href='../../2012/01/index.html'>2012年一月</a></li>
	<li><a href='../../2011/12/index.html'>2011年十二月</a></li>
	<li><a href='../../2011/11/index.html'>2011年十一月</a></li>
	<li><a href='../../2011/09/index.html'>2011年九月</a></li>
	<li><a href='../../2011/08/index.html'>2011年八月</a></li>
	<li><a href='../../2011/07/index.html'>2011年七月</a></li>
	<li><a href='../../2011/06/index.html'>2011年六月</a></li>
	<li><a href='../../2011/05/index.html'>2011年五月</a></li>
	<li><a href='../../2011/04/index.html'>2011年四月</a></li>
	<li><a href='../../2011/03/index.html'>2011年三月</a></li>
	<li><a href='../../2011/02/index.html'>2011年二月</a></li>
	<li><a href='../../2011/01/index.html'>2011年一月</a></li>
	<li><a href='../../2010/12/index.html'>2010年十二月</a></li>
	<li><a href='../../2010/11/index.html'>2010年十一月</a></li>
	<li><a href='../../2010/10/index.html'>2010年十月</a></li>
	<li><a href='../../2010/09/index.html'>2010年九月</a></li>
	<li><a href='../../2010/08/index.html'>2010年八月</a></li>
	<li><a href='../../2010/07/index.html'>2010年七月</a></li>
	<li><a href='../../2010/05/index.html'>2010年五月</a></li>
	<li><a href='../../2010/04/index.html'>2010年四月</a></li>
	<li><a href='../../2010/03/index.html'>2010年三月</a></li>
	<li><a href='../../2010/02/index.html'>2010年二月</a></li>
	<li><a href='../../2010/01/index.html'>2010年一月</a></li>
	<li><a href='../../2009/12/index.html'>2009年十二月</a></li>
	<li><a href='../../2009/11/index.html'>2009年十一月</a></li>
	<li><a href='../../2009/10/index.html'>2009年十月</a></li>
	<li><a href='../../2009/09/index.html'>2009年九月</a></li>
	<li><a href='../../2009/08/index.html'>2009年八月</a></li>
	<li><a href='../../2009/07/index.html'>2009年七月</a></li>
	<li><a href='../../2009/06/index.html'>2009年六月</a></li>
	<li><a href='../../2009/05/index.html'>2009年五月</a></li>
	<li><a href='../../2009/04/index.html'>2009年四月</a></li>
	<li><a href='../../2009/03/index.html'>2009年三月</a></li>
	<li><a href='../../2009/02/index.html'>2009年二月</a></li>
	<li><a href='../../2009/01/index.html'>2009年一月</a></li>
	<li><a href='../../2008/12/index.html'>2008年十二月</a></li>
	<li><a href='../../2008/11/index.html'>2008年十一月</a></li>
	<li><a href='../../2008/10/index.html'>2008年十月</a></li>
	<li><a href='../../2008/07/index.html'>2008年七月</a></li>
	<li><a href='../../2008/06/index.html'>2008年六月</a></li>
	<li><a href='../../2008/05/index.html'>2008年五月</a></li>
	<li><a href='../../2008/04/index.html'>2008年四月</a></li>
	<li><a href='../../2008/03/index.html'>2008年三月</a></li>
	<li><a href='../../2008/02/index.html'>2008年二月</a></li>
	<li><a href='../../2008/01/index.html'>2008年一月</a></li>
	<li><a href='../../2007/12/index.html'>2007年十二月</a></li>
	<li><a href='../../2007/11/index.html'>2007年十一月</a></li>
	<li><a href='../../2007/10/index.html'>2007年十月</a></li>
	<li><a href='../../2007/09/index.html'>2007年九月</a></li>
	<li><a href='../../2007/08/index.html'>2007年八月</a></li>
	<li><a href='../../2007/07/index.html'>2007年七月</a></li>
	<li><a href='../../2007/06/index.html'>2007年六月</a></li>
	<li><a href='../../2007/05/index.html'>2007年五月</a></li>
	<li><a href='../../2007/04/index.html'>2007年四月</a></li>
	<li><a href='../../2007/03/index.html'>2007年三月</a></li>
	<li><a href='../../2007/02/index.html'>2007年二月</a></li>
	<li><a href='../../2007/01/index.html'>2007年一月</a></li>
	<li><a href='../../2006/12/index.html'>2006年十二月</a></li>
	<li><a href='../../2006/11/index.html'>2006年十一月</a></li>
	<li><a href='../../2006/10/index.html'>2006年十月</a></li>
		</ul>
		</section>	</aside><!-- .sidebar .widget-area -->

		</div><!-- .site-content -->

		<footer id="colophon" class="site-footer" role="contentinfo">
			
			
			<div class="site-info">
								<span class="site-title"><a href="../../index.html" rel="home">骨头鱼的墓</a></span>
				<a href="https://cn.wordpress.org/">自豪地采用WordPress</a>
			</div><!-- .site-info -->
		</footer><!-- .site-footer -->
	</div><!-- .site-inner -->
</div><!-- .site -->

<script type='text/javascript' src='../../wp-content/themes/twentysixteen/js/skip-link-focus-fix8de4.js?ver=20160816'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var screenReaderText = {"expand":"\u5c55\u5f00\u5b50\u83dc\u5355","collapse":"\u6298\u53e0\u5b50\u83dc\u5355"};
/* ]]> */
</script>
<script type='text/javascript' src='../../wp-content/themes/twentysixteen/js/functions8de4.js?ver=20160816'></script>
<script type='text/javascript' src='../../wp-includes/js/wp-embed.min1c9b.js?ver=4.6.1'></script>
</body>

<!-- Mirrored from gonefish.info/category/django/ by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 21 Sep 2016 23:57:41 GMT -->
</html>
